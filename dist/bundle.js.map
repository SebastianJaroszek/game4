{"version":3,"file":"bundle.js","sources":["webpack:///./src/game.ts","webpack:///./src/main.ts"],"sourcesContent":["\"use strict\";\n\nvar __extends = this && this.__extends || function () {\n  var extendStatics = Object.setPrototypeOf || {\n    __proto__: []\n  } instanceof Array && function (d, b) {\n    d.__proto__ = b;\n  } || function (d, b) {\n    for (var p in b) if (b.hasOwnProperty(p)) d[p] = b[p];\n  };\n\n  return function (d, b) {\n    extendStatics(d, b);\n\n    function __() {\n      this.constructor = d;\n    }\n\n    d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n  };\n}();\n\nvar __assign = this && this.__assign || Object.assign || function (t) {\n  for (var s, i = 1, n = arguments.length; i < n; i++) {\n    s = arguments[i];\n\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n  }\n\n  return t;\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar Game =\n/** @class */\nfunction (_super) {\n  __extends(Game, _super);\n\n  function Game() {\n    var _this = _super.call(this, {\n      key: 'Game'\n    }) || this;\n\n    _this.speed = 100;\n    _this.count = 0;\n    _this.score = 0;\n    _this.bestScore = 0;\n    _this.labels = {\n      labelName: null,\n      labelTuto: null,\n      labelBest: null,\n      labelScore: null\n    };\n    _this.status = {\n      coinTaking: false,\n      menuScene: true,\n      isMoving: false,\n      moving: {\n        down: false,\n        up: false,\n        left: false,\n        right: false\n      }\n    };\n    _this.sounds = {\n      coinSound: null,\n      moveSound: null,\n      hitSound: null,\n      music: null\n    };\n    return _this;\n  }\n\n  Game.prototype.preload = function () {\n    this.load.audio('coin', 'assets/coin.mp3');\n    this.load.audio('move', 'assets/move.mp3');\n    this.load.audio('hit', 'assets/hit.mp3');\n    this.load.audio('music', 'assets/music.ogg');\n    this.load.image('square', 'assets/square.png');\n    this.load.image('coin', 'assets/coin.png');\n    this.load.image('particle', 'assets/particle.png');\n    this.load.image('particle2', 'assets/particle2.png');\n    this.load.image('enemy', 'assets/enemy.png');\n    this.load.image('map', 'assets/map2.png');\n  };\n\n  Game.prototype.create = function () {\n    this.width = this.cameras.main.width;\n    this.height = this.cameras.main.height;\n    this.nextEnemy = this.time.now;\n    this.arrow = this.input.keyboard.createCursorKeys();\n    this.initLevel();\n    this.initSounds();\n  };\n\n  Game.prototype.update = function (timestep, delta) {\n    this.physics.overlap(this.square, this.coin, this.takeCoin.bind(this));\n    this.movePlayer();\n  };\n\n  Game.prototype.takeCoin = function () {\n    this.add.tween({\n      targets: [this.coin],\n      scaleY: 0,\n      scaleX: 0,\n      duration: 100\n    });\n  };\n\n  Game.prototype.initLevel = function () {\n    this.coin = this.physics.add.sprite(this.width / 2 + 8 * 8, this.height / 2 - 8 * 8, 'coin');\n    this.map = this.physics.add.sprite(this.width / 2, this.height / 2, 'map');\n    this.square = this.physics.add.sprite(this.width / 2 - 8 * 8, this.height / 2 + 8 * 8, 'square');\n  };\n\n  Game.prototype.initSounds = function () {\n    this.sounds.moveSound = this.sound.add('move');\n    this.sounds.moveSound.volume = 0.05;\n    this.sounds.music = this.sound.add('music');\n    this.sounds.music.volume = 0.05;\n    this.sounds.music.play();\n  };\n\n  Game.prototype.movePlayer = function () {\n    if (this.status.isMoving) {\n      return;\n    }\n\n    this.commandMove('up', this.arrow.up);\n    this.commandMove('down', this.arrow.down);\n    this.commandMove('left', this.arrow.left);\n    this.commandMove('right', this.arrow.right);\n  };\n\n  Game.prototype.commandMove = function (way, command) {\n    if (command.isDown && !this.status.moving[way]) {\n      this.status.moving[way] = true;\n      this.move(way);\n    } else if (command.isUp) {\n      this.status.moving[way] = false;\n    }\n  };\n\n  Game.prototype.move = function (way) {\n    var t = this.tweens.createTimeline({}),\n        config = {\n      targets: [this.square],\n      duration: this.speed\n    };\n    this.status.isMoving = true;\n\n    if (way === 'up') {\n      if (Math.ceil(this.square.y) > this.height / 2 - 8 * 8) {\n        t.add(__assign({}, config, {\n          y: this.square.y - this.square.height - 24\n        }));\n      } else {\n        t.add(__assign({}, config, {\n          duration: this.speed / 2,\n          y: this.square.y - this.square.height / 3\n        }));\n        t.add(__assign({}, config, {\n          duration: this.speed / 2,\n          y: this.square.y\n        }));\n      }\n    }\n\n    if (way === 'down') {\n      if (Math.ceil(this.square.y) < this.height / 2 + 8 * 8) {\n        t.add(__assign({}, config, {\n          y: this.square.y + this.square.height + 24\n        }));\n      } else {\n        t.add(__assign({}, config, {\n          duration: this.speed / 2,\n          y: this.square.y + this.square.height / 3\n        }));\n        t.add(__assign({}, config, {\n          duration: this.speed / 2,\n          y: this.square.y\n        }));\n      }\n    }\n\n    if (way === 'left') {\n      if (Math.ceil(this.square.x) > this.height / 2 - 8 * 8) {\n        t.add(__assign({}, config, {\n          x: this.square.x - this.square.width - 24\n        }));\n      } else {\n        t.add(__assign({}, config, {\n          duration: this.speed / 2,\n          x: this.square.x - this.square.width / 3\n        }));\n        t.add(__assign({}, config, {\n          duration: this.speed / 2,\n          x: this.square.x\n        }));\n      }\n    }\n\n    if (way === 'right') {\n      if (Math.ceil(this.square.x) < this.height / 2 + 8 * 8) {\n        t.add(__assign({}, config, {\n          x: this.square.x + this.square.width + 24\n        }));\n      } else {\n        t.add(__assign({}, config, {\n          duration: this.speed / 2,\n          x: this.square.x + this.square.width / 3\n        }));\n        t.add(__assign({}, config, {\n          duration: this.speed / 2,\n          x: this.square.x\n        }));\n      }\n    }\n\n    this.sounds.moveSound.play();\n    t.play();\n    t.add({\n      targets: [this.square],\n      onComplete: this.moveOver.bind(this)\n    });\n  };\n\n  Game.prototype.moveOver = function () {\n    this.status.isMoving = false;\n  };\n\n  return Game;\n}(Phaser.Scene);\n\nexports.default = Game;\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/game.ts\n// module id = 1407\n// module chunks = 0","\"use strict\";\n\nvar __importDefault = this && this.__importDefault || function (mod) {\n  return mod && mod.__esModule ? mod : {\n    \"default\": mod\n  };\n};\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nrequire(\"phaser\");\n\nvar game_1 = __importDefault(require(\"./game\"));\n\nvar config = {\n  type: Phaser.AUTO,\n  parent: 'content',\n  physics: {\n    default: 'arcade',\n    arcade: {\n      debug: true\n    }\n  },\n  width: 500,\n  height: 500,\n  resolution: 1,\n  backgroundColor: \"#9b59b6\",\n  scene: game_1.default\n};\nnew Phaser.Game(config);\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/main.ts\n// module id = 517\n// module chunks = 0"],"mappings":";;;;;;;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;;;;;;;;;;;;;;;;;;;;;;;AC7OA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;;;A","sourceRoot":""}